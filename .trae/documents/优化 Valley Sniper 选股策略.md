# Valley Sniper V5 修改报告与实施计划 (Pre-flight Check)

您的建议非常务实。直接上实盘（Live）风险在于可能因为一个小语法错误（Syntax Error）导致在关键时刻（14:45）脚本崩溃。

为了确保“首秀”万无一失，我们在实施步骤中插入一个 **“干跑测试” (Dry Run)** 环节。

## 1. 策略核心逻辑 (Alpha Logic)
*   **5 重硬性过滤**：涨跌幅 (2-6%)、K线 (实体阳线+短上影)、趋势 (-10~20%)、市值 (30-500亿)、活跃度 (量比/换手)。
*   **数据单位**：严格对标。

## 2. 健壮性设计 (Robustness)
*   **分层防御**：重试层（网络） -> 校验层（空数据/字段） -> 业务层（筛选）。

## 3. 验证与测试计划 (The Validation Path)

### A. 环境准备与干跑 (Dry Run) **[新增]**
在代码编写完成后，我们将**立即执行一次**脚本：
1.  **目的**：验证代码无语法错误，`akshare` 接口能否在当前网络环境下正常返回数据，以及数据字段名是否与预期一致（防止接口字段变更）。
2.  **预期结果**：
    *   如果当前是交易时间：应输出筛选结果或“空仓提示”。
    *   如果当前是休市时间：应能正常获取收盘数据并跑通逻辑。
    *   *关键点*：只要不报错（Crash），即视为通过。

### B. 实盘模拟 (Paper Trading)
*   **时间**：下一交易日 14:45。
*   **目标**：观察选股名单，验证策略逻辑。

## 4. 实施步骤

1.  **重写脚本**：替换 `backend/scripts/valley_sniper_v2.py`，植入 V5 逻辑与健壮性模块。
2.  **立即测试**：运行脚本，进行 Dry Run，确保流程跑通。
3.  **交付**：确认无误后，交付最终代码。

请确认，我们将按此流程执行，确保上线即稳定。