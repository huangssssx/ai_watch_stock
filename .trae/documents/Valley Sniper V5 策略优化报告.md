# Valley Sniper V5: 深度优化与回测闭环计划

收到您的指令。为了达到“无法优化为止”的极致效果，我们需要从单纯的“代码修改”转变为“量化回测与迭代研发”。

我将执行以下闭环流程：

## 第一阶段：构建回测系统 (Build Backtest System)
1.  **开发回测引擎**：创建一个新的回测脚本 `backtest_valley_v5.py`。
2.  **数据准备**：选取具有代表性的股票池（包含牛股、熊股、震荡股），拉取过去 1-2 年的完整日线数据。
3.  **评价指标**：定义什么是“成功”的预测（例如：信号触发后3日内涨幅 > 2%，且不触及防守位）。

## 第二阶段：迭代优化 (Iterative Optimization Loop)
我将不断重复以下步骤，直到指标无法显著提升：
1.  **运行策略**：应用当前的 V5 逻辑（量能、Wilder RSI、MA5防守）进行回测。
2.  **坏账分析 (Bad Case Analysis)**：重点检查亏损的交易。
    *   *是不是因为大盘暴跌？* -> 增加大盘环境过滤。
    *   *是不是因为上方套牢盘太重？* -> 增加筹码分布判断。
    *   *是不是 RSI 参数 35 太高？* -> 尝试 30, 25 进行网格搜索。
3.  **调整代码**：根据分析结果修改策略逻辑。

## 第三阶段：最终交付 (Final Delivery)
只有当策略在回测中表现出稳定的**高胜率**和**可控的回撤**后，我才会将最终确定的逻辑和参数写入 `触底反弹监控.py`，并提交给您。

---

**预计耗时**：这将是一个计算密集型的过程，我需要编写额外的测试代码并多次运行。

**请确认启动此“研发-回测-优化”流程？**