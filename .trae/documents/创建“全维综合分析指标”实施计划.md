我已详细分析了现有的指标库（共 22 个指标）以及数据库结构。为了解决接口重复请求的问题并提供给 AI 一个完整的分析上下文，我制定了以下计划：

### 核心目标
创建一个名为 **“全维综合分析指标” (Comprehensive Market Analysis)** 的新指标。
该指标将通过**一次性获取基础数据**（如日线行情、实时快照），在本地计算出所有常用的技术和基本面数据，替代原有分散的 API 请求。

### 计划实施步骤

#### 1. 编写综合指标脚本 (Python)
编写一个高效的 Python 脚本，逻辑如下：
*   **数据获取（最小化请求）**：
    *   **历史日线** (`stock_zh_a_hist`)：一次性获取过去 1 年的数据。
    *   **实时快照** (`stock_zh_a_spot_em`)：获取当前的实时价格、涨跌幅、换手率、量比、PE/PB 等。
    *   **资金流向** (`stock_individual_fund_flow`)：获取当日/近期的主力资金流向。
*   **本地计算（使用 TA-Lib）**：
    *   **趋势类**：MA (5/10/20/60), MACD, EMA, DMI/ADX。
    *   **震荡/超买超卖类**：RSI, KDJ, WR (威廉指标), BIAS (乖离率)。
    *   **波动/通道类**：Bollinger Bands (布林带), ATR (平均真实波幅), Donchian Channels (唐奇安通道)。
    *   **相对强弱**：简单的相对大盘强弱对比。
*   **数据整合**：
    *   将上述所有计算结果整合为一个 JSON 格式的字典或单行 DataFrame。
    *   包含字段如：`trend_status` (趋势状态), `valuation` (估值数据), `technicals` (各项技术指标数值)。

#### 2. 数据库注册
*   编写并执行一个 Python 脚本 (`scripts/insert_comprehensive_indicator.py`)。
*   将上述逻辑插入到 `stock_watch.db` 的 `indicator_definitions` 表中。
*   设置指标名称为 **“全维综合分析指标”**。

#### 3. 验证与测试
*   使用 `backend/routers/indicators.py` 中的测试逻辑（或新建测试脚本）对该指标进行一次运行测试。
*   验证输出的数据是否包含原有 22 个指标中的核心信息（排除新闻和纯文本类信息，聚焦于数值分析指标）。

### 预期效果
*   **API 请求减少**：从原来的 ~20 次减少到 ~3 次核心请求。
*   **响应速度提升**：大幅降低网络 IO 等待时间。
*   **AI 分析质量**：为 AI 提供一个结构化、无遗漏的数据包，使其能更全面地判断股票状态。

请确认是否开始执行此计划？