## 我如何确认 `realtime_quote.volume` 是“累计量”

我依据“文档语义 + 接口分工 + 仓库现有用法”三点交叉印证：

1. 文档给出的字段组合是“日内统计快照”
- `realtime_quote` 输出同时包含：`date/time/open/high/low/pre_close/price/volume/amount`。
- 这组字段在行情系统里通常代表“截至当前时刻的日内累计统计”（尤其 `high/low` 是日内累计极值），而不是“瞬时一笔”。

2. 文档里专门提供了“分笔成交”接口
- [实时成交数据(爬虫版)](file:///Users/huangchuanjian/workspace/my_projects/ai_watch_stock/docs/tushare%20%E6%96%87%E6%A1%A3/01_%E8%82%A1%E7%A5%A8%E6%95%B0%E6%8D%AE/02_%E8%A1%8C%E6%83%85%E6%95%B0%E6%8D%AE/12_%E5%AE%9E%E6%97%B6%E6%88%90%E4%BA%A4%EF%BC%88%E7%88%AC%E8%99%AB%EF%BC%89.md) 的 `realtime_tick` 明确是“当日开盘以来的所有分笔成交”，每条记录的 `volume` 才是单笔/单条成交量。

3. 仓库已有脚本把它当“累计量”在用（否则计算不成立）
- 现有逻辑用 `vwap = amount / volume` 并用它和当前价做数量级校验（这只有在 amount/volume 是“当日累计成交额/累计成交量”时才成立）。参考：[热点追涨.py](file:///Users/huangchuanjian/workspace/my_projects/ai_watch_stock/backend/script/%E7%83%AD%E7%82%B9%E8%BF%BD%E6%B6%A8.py#L65-L85)

另外，文档也明确了单位差异：`src=sina` 时 `volume` 单位是股，`src=dc` 时是手，见 [实时盘口TICK快照](file:///Users/huangchuanjian/workspace/my_projects/ai_watch_stock/docs/tushare%20%E6%96%87%E6%A1%A3/01_%E8%82%A1%E7%A5%A8%E6%95%B0%E6%8D%AE/02_%E8%A1%8C%E6%83%85%E6%95%B0%E6%8D%AE/11_%E5%AE%9E%E6%97%B6Tick%EF%BC%88%E7%88%AC%E8%99%AB%EF%BC%89.md#L38-L39)。

---

## 八步开发清单（每一步：做什么 + 用什么接口）

1. 涨幅（替代“60涨幅榜”）
- 做什么：拿到全市场实时涨幅并筛选 3%~5%
- 接口：`ts.realtime_list(src='sina')`

2. 量比（剔除 <1.2）
- 做什么：用“当日累计量”构造代理量比：今日累计成交量 / 近N日平均日成交量
- 接口：
  - `ts.realtime_quote(ts_code=..., src='sina')`
  - `pro.daily(ts_code=..., start_date=..., end_date=...)`

3. 换手（动态阈值）
- 做什么：用当日累计成交量估算当下换手：累计成交股数 / 流通股本
- 接口：
  - `ts.realtime_quote(ts_code=..., src='sina')`
  - `pro.daily_basic(ts_code=..., trade_date=..., fields='float_share,free_share')`

4. 流通市值（50~200亿）
- 做什么：过滤流通市值范围
- 接口：`pro.daily_basic(ts_code=..., trade_date=..., fields='circ_mv')`

5. 量能趋势（持续放量）
- 做什么：用近N日日线成交量序列判断持续放量/波动过大
- 接口：`pro.daily(ts_code=..., start_date=..., end_date=..., fields='trade_date,vol,amount')`

6. 形态（重要均线上方/上方无压力）
- 做什么：计算 MA20/MA60、近N日高点/回撤，过滤均线下方与冲高回落
- 接口：`pro.daily(ts_code=..., start_date=..., end_date=..., fields='trade_date,open,high,low,close')`

7. 分时（在均价线之上 + 强于大盘）
- 做什么：VWAP≈均价线（amount/volume），并与指数做相对强
- 接口：
  - `ts.realtime_quote(ts_code=..., src='sina')`
  - `ts.realtime_quote(ts_code='000001.SH', src='sina')`

8. 新高 + 回踩企稳（过滤诱多）
- 做什么：用分笔成交检测 14:30 后创新高→回踩→企稳再走强
- 接口：`ts.realtime_tick(ts_code=..., src='sina')`

---

## 脚本构建顺序（严格按接口依赖）

1. `pro.stock_basic` 构建股票池
2. `ts.realtime_list` 实现 Step1（涨幅区间）
3. `ts.realtime_quote` + `pro.daily/pro.daily_basic` 实现 Step2~4
4. `pro.daily` 实现 Step5~6
5. `ts.realtime_quote`（含指数）实现 Step7
6. `ts.realtime_tick` 实现 Step8（只对少量最终候选调用）

确认后我将按此清单开始写脚本，只使用上述这些确定接口。